# Cryptographic Protocol Design

Revani treats security not as an optional add-on, but as a core component of the system. It utilizes a custom protocol built on a **"Zero-Trust"** architecture at the communication layer.

## 1. AES-GCM 256-bit: Transparent and Armored Communication
All data flow between the Client and the Server is encrypted using **AES-GCM** (Galois/Counter Mode). The reasons for choosing this algorithm are:

**Confidentiality:** It prevents unauthorized parties from reading the data.

**Integrity:** It mathematically guarantees that the data has not been tampered with during transit.

**AEAD Support:** Authenticated Encryption with Associated Data ensures that both encryption and data verification are performed in a single, atomic step.



## 2. Dynamic Session Management and Salt/Nonce Derivation
Static encryption keys are always vulnerable to attacks. Revani minimizes this risk through:

**Session-Based Keys:** A unique session key is derived between the client and server for every new connection.

**Request-Specific IV:** Each individual request uses a random **IV (Initialization Vector)** and **Salt** generated by the cryptographic library. This ensures that even if the same command is sent twice, the resulting encrypted outputs will be completely different, preventing pattern analysis.

## 3. Replay Attack Protection
Even if attackers cannot decrypt the data, they might attempt to intercept a valid packet and re-send it to the server. Revani prevents this with the following mechanism:

**Timestamped Packets:** Every encrypted packet embeds a precise timestamp.

**30-Second Rule:** The server compares the packet's timestamp with its own clock. If the packet is older than 30 seconds, it is rejected with a **"Replay Attack Detected"** error, even if the encryption key is correct.

## 4. Authentication: Argon2id
User passwords used during system login are protected by the **Argon2id** algorithm rather than standard hashing methods:

**Memory-Hardness:** It makes the cost of GPU or ASIC-based brute-force attacks prohibitively expensive by requiring massive memory allocation.

**Time and Memory Cost:** Iteration and memory parameters in the server configuration create a mathematical wall against attackers.

## 5. Security Layers
In Revani, data security is divided into two primary layers:

**In-Transit:** Prevents data flowing from client to server from being stolen over the network.

**At-Rest:** Data is stored encrypted within the database file (`revani.db`). This ensures that an attacker who gains physical access to the disk cannot retrieve meaningful information.

## Technical Summary
The Revani protocol is an engineering feat that combines cryptographic primitives (AES, Argon2, Nonce management) to guarantee the **uniqueness, confidentiality, and integrity** of every packet.

---
The continuation of this documentation can be found in the *04_data_persistence.md* file.